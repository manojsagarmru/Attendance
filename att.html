<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<div class="panel-body">

    <form method="post" name="google-sheet" id="myForm">
    <table id="data-table" class="table table-striped table-bordered nowrap" width="100%">
        <thead>
            <tr>
                <td>Mobile Number: <input type="text" id="mob_number"/></td>
                <td>Date <input type="text"id="date"/></td>
                <td>Session <input type="text" id="session"/></td>
            </tr>
            <tr>
                <th>Roll Number</th>
                <th>Name</th>
                <th>Absents</th>
            </tr>
        </thead>
        <tbody>
            <tr class="odd gradeX">
                <td>541</td>
                <td>Sreeja. Seelam</td>
                <td><input  class="messageCheckbox" type="checkbox" name="541"  value="541"/></td>
            </tr>
            <tr class="odd gradeX">
                <td>542</td>
                <td>B.Srija Reddy</td>
                <td><input class="messageCheckbox" type="checkbox" name="542" value="542"/></td>
            </tr>
            <tr class="odd gradeX">
                <td>543</td>
                <td>Bandaram Sreeja</td>
                <td><input class="messageCheckbox" type="checkbox" name="543" value="543"/></td>
            </tr>
            <tr class="odd gradeX">
                <td>544</td>
                <td>R.Sreeja</td>
                <td><input class="messageCheckbox" type="checkbox" name="544" value="544" /></td>
            </tr>
            <tr class="odd gradeX">
                <td>545</td>
                <td>Ummadi Sreeja </td>
                <td><input class="messageCheckbox" type="checkbox" name="545" value="545" /></td>
            </tr>
            <tr class="odd gradeX">
                <td>546</td>
                <td>M.Sreenidhi </td>
                <td><input class="messageCheckbox" type="checkbox" name="546" value="546"/></td>
            </tr>
            <tr class="odd gradeX">
                <td>547</td>
                <td>D.Sri Ajay</td>
                <td><input class="messageCheckbox" type="checkbox" name="547" value="547"/></td>
            </tr>
            <tr class="odd gradeX">
                <td>548</td>
                <td>Y.Guru Bharath </td>
                <td><input class="messageCheckbox" type="checkbox" name="548" value="548"/></td>
            </tr>
            <tr class="odd gradeX">
                <td>549</td>
                <td>A.Sricharan </td>
                <td><input class="messageCheckbox" type="checkbox" name="549" value="549"/></td>
            </tr>
            <tr class="odd gradeX">
                <td>550</td>
                <td>S.Surya Prakash</td>
                <td><input class="messageCheckbox" type="checkbox" name="550" value="550"/></td>
            </tr>
             <tr class="odd gradeX">
                <td>551</td>
                <td>Sri Kankshith</td>
                <td><input class="messageCheckbox" type="checkbox" name="551" value="551"/></td>
              </tr>
              <tr class="odd gradeX">
                    <td>552</td>
                    <td>Havanuru Sri Surya </td>
                    <td><input class="messageCheckbox" type="checkbox" name="552" value="552"/></td>
              </tr>
              <tr class="odd gradeX">
                    <td>553</td>
                    <td>Alapati Srivarshini </td>
                    <td><input class="messageCheckbox" type="checkbox" name="553" value="553"/></td>
              </tr>
              <tr class="odd gradeX">
                    <td>554</td>
                    <td>Srija Yalamanchili</td>
                    <td><input class="messageCheckbox" type="checkbox" name="554" value="554"/></td>
              </tr>
              <tr class="odd gradeX">
                    <td>555</td>
                    <td>Yasam Srikanth </td>
                    <td><input class="messageCheckbox" type="checkbox" name="555" value="555"/></td>
              </tr>
              <tr class="odd gradeX">
                    <td>556</td>
                    <td>H Srikanth</td>
                    <td><input class="messageCheckbox" type="checkbox" name="556" value="556"/></td>
              </tr>
              <tr class="odd gradeX">
                    <td>557</td>
                    <td>Dasari Srikar</td>
                    <td><input class="messageCheckbox" type="checkbox" name="557" value="557"/></td>
              </tr>
              <tr class="odd gradeX">
                    <td>558</td>
                    <td>Padam Srikarh</td>
                    <td><input class="messageCheckbox" type="checkbox" name="558" value="558"/></td>
              </tr>
              <tr class="odd gradeX">
                    <td>559</td>
                    <td>Srilekha Rajanaku </td>
                    <td><input class="messageCheckbox" type="checkbox" name="559" value="559"/></td>
              </tr>
              <tr class="odd gradeX">
                    <td>560</td>
                    <td>Dhumnor Srinath </td>
                    <td><input class="messageCheckbox" type="checkbox" name="560" value="560"/></td>
              </tr>
        </tbody>
    </table>
    <input type="submit" name="submit" id="f_btn1" onclick="calculate_attendance()">
    </form>
</div>
<script>
    function calculate_attendance() { 
        window.alert("Test");
        var inputElements = document.getElementsByClassName('messageCheckbox');
        var Mobileno = document.getElementById("mob_number").value;
        var date = document.getElementById("date").value;
        var session = document.getElementById("session").value;
        // window.alert(Mobileno + date + session);
        // console.log(inputElements[3]);
        checkedValue ="";
        count = 0;
    for(var i=0; inputElements[i]; ++i){
      if(inputElements[i].checked){
           checkedValue = checkedValue.concat(inputElements[i].value.toString(),",");
           count ++;
            
      }
    }
    present = 89-count;
    checkedValue = checkedValue.slice(0,-1)
    window.location.replace("https://api.whatsapp.com/send?phone=+91"+Mobileno+"&text=Date: "+date+"%0aSession: "+session+"%0aAbsentees No: "+checkedValue+"%0aAbsent: "+count+"%0aPresent: "+present+"%0aTotal: "+present+"/89")

    window.alert("https://api.whatsapp.com/send?phone=+91"+Mobileno+"&text=Date:"+date+"\nSession:"+session+"\nAbsentees No: "+checkedValue+"\nAbsent:"+count+"\nPresent:"+present+"\nTotal:"+present+"/89");
};

</script>
